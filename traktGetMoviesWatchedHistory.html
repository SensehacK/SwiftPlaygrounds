<!DOCTYPE html>
<html>
  <head>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  </head>
<body>

<div id="beta"></div>

<script>

// makeCorsRequest();
function UserAction() {
          var request = new XMLHttpRequest();

          var getRecentShowsHistory = "https://api.trakt.tv/users/sensehack/history/shows/"

          var getRecentMoviesHistory = "https://api.trakt.tv/users/sensehack/history/movies/"

          var getOverallWatchedShowsHistory = "https://api.trakt.tv/users/sensehack/watched/shows/"

          var getOverallWatchedMoviesHistory = "https://api.trakt.tv/users/sensehack/watched/movies/"

          var getRecentShowsHistory = "https://api.trakt.tv/users/sensehack/history/shows/"
          
          var url = "https://api.trakt.tv/users/sensehack/stats"
          
          var url4 = "https://api.trakt.tv/users/sensehack/stats"

          // call url
          request.open('GET', getRecentMoviesHistory);


          request.setRequestHeader('Content-Type', 'application/json');
          request.setRequestHeader('trakt-api-version', '2');

          // Client ID of Trial 2 cors.io
          request.setRequestHeader('trakt-api-key', 'e76f84733301c6380989637d3c7cc0394f58ae5046b94649d9d65f18e31e43fa');

          
          request.onreadystatechange = function () {

            if (this.readyState === 4) {
              console.log('Status:', this.status);
              console.log('Headers:', this.getAllResponseHeaders());

              
              // console.log('Body:', this.responseText);
              var traktJSON = this.responseText;
              
              //Code printing for traktJSON raw string data
              // console.log(typeof(traktJSON))
              // console.log("Trakt TV sensehack Data")
              // console.log(traktJSON)
              
              var traktObj = JSON.parse(traktJSON)
              console.log(typeof(traktObj))
              console.log("Printing trakt Obj")
              console.log(traktObj)
              
              //Accessing 8 json elements overall
              for (var i = 0; i < 8; i++) {
                console.log("Printing iteration number", i) 
                // Trying to access show titles & episode details  
                console.log("traktObj[i].id")
                console.log(traktObj[i].id)
                
                // Accessing show title
                console.log("accessing movie.title")
                console.log(traktObj[i].movie.title)

                // Accessing show title
                console.log("accessing .movie.year")
                console.log(traktObj[i].movie.year)
              }



            }
            


          };

          

          request.send();
          

}

</script>

<button type="submit" onclick="UserAction()">Search</button>

<p id = "traktData"> Hello Sensehack Trakt TV</p>

</body>
</html>
